= Design

== HTTP signature

See https://www.iana.org/assignments/http-message-signature/http-message-signature.xhtml

* Outgoing messages use Ed25519
* Support verify incoming messages with
  - rsa-pss-sha512
  - rsa-v1_5-sha256
  - hmac-sha256
  - ecdsa-p256-sha256
  - ecdsa-p384-sha384
  - ed25519
* Internal key representation is DER encoded string.

== URLs

All the federation APIs are under `/fed` path.

== Posts

- All posts from this server are Markdown.
- The attachments will be hashed and renamed with the hash. This could
  act as deduplication. Furthermore we could use this to implement a
  sticker system. User could choose attachments from a set of existing
  attachments.

== Database

- The posts table stores both local and remote posts.
- The users table only stores local users.

== Dependency

* Crypto++
